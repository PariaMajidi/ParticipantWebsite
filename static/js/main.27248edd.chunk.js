(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,n){e.exports={buttons:"VibrationFeedback_buttons__3fVqe",label:"VibrationFeedback_label__2wY3y",button:"VibrationFeedback_button__3c8Px"}},16:function(e,t,n){e.exports={choices:"Confidence_choices__bNdTw",bar:"Confidence_bar__hCQLU",choice:"Confidence_choice__3WEj0",disk:"Confidence_disk__1Mzzn",label:"Confidence_label__3d-zk"}},18:function(e,t,n){e.exports={form:"Start_form__1-51v",input:"Start_input__2mfo9"}},25:function(e,t){e.exports=function(){var e=new Date;return"".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds(),".").concat(e.getMilliseconds())}},26:function(e,t,n){e.exports={form:"Setup_form__33R4h",input:"Setup_input__3x1Nx",detected:"Setup_detected__p3N_r"}},30:function(e,t,n){e.exports={Layout:"Layout_Layout__cNxex",title:"Layout_title__1Vzaw"}},36:function(e,t,n){e.exports={Button:"Button_Button__30-l0"}},37:function(e,t,n){e.exports={button:"Ready_button__1_RgV"}},38:function(e,t,n){e.exports={Loader:"Loader_Loader__Ql2Gi","-webkit-lds-ripple":"Loader_-webkit-lds-ripple__1RFsK","lds-ripple":"Loader_lds-ripple__3zHcd"}},39:function(e,t,n){e.exports={countDown:"Vibration_countDown__2Jysa"}},40:function(e,t,n){e.exports={buttons:"Menu_buttons__bp7eO"}},52:function(e,t,n){},53:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(22),i=n.n(a),s=n(4),o=n(11),u=n(5),l=n(20),d=n(7),b=n.n(d),j=n(13),p=n(15),f=n(41),h=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest","https://sheets.googleapis.com/$discovery/rest?version=v4"],O=function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gapi.client.drive.files.list({q:"mimeType='audio/wav' and '".concat(t,"' in parents"),spaces:"drive",fields:"files(id, webContentLink, name)"});case 3:return n=e.sent,console.log("result",n),e.abrupt("return",n.result.files);case 8:e.prev=8,e.t0=e.catch(0),console.error("error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[t],gapi.client.sheets.spreadsheets.values.append({spreadsheetId:"1zsX46IRkQFkZVG_M5v7Y9WMjYF4Fxq45vt2F0FzxTFM",resource:{values:n,majorDimension:"ROWS"},range:"Sheet1",insertDataOption:"INSERT_ROWS",valueInputOption:"USER_ENTERED"}).then((function(e){var t=e.result;console.log("".concat(t.updates.updatedCells," cells appended."))})).catch((function(e){console.log("error",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){return gapi.auth2.getAuthInstance().signIn()},m=function(){return gapi.auth2.getAuthInstance().signOut()},g=Object(f.a)({name:"sounds",initialState:{sounds:[],feedback:{},repetitions:{},folderId:""},reducers:{setSounds:function(e,t){var n=t.payload;e.sounds=n},setFolderId:function(e,t){var n=t.payload;e.folderId=n},setCurrentFeedback:function(e,t){var n=t.payload;n.vibration&&(e.repetitions[n.vibration]=(e.repetitions[n.vibration]||0)+1),e.feedback=Object(p.a)(Object(p.a)(Object(p.a)({},e.feedback),n),{},{repetition:e.repetitions[n.vibration]})}}}),_=g.actions,N=_.setSounds,k=_.setCurrentFeedback,w=_.setFolderId,S=g.reducer,y=function(e){return e.sounds.length},I=function(e){return e.folderId},C=function(e){var t=[l.a],n=[u.a.apply(void 0,t)],c=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d).apply(void 0,n);return Object(u.e)(S,e,c)}(),L=(n(52),n(3)),F=(n(53),n(30)),E=n.n(F),R=n(1),T=function(e){var t=e.title,n=e.children;return Object(R.jsx)("div",{className:E.a.Layout,children:Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:E.a.title,children:t}),n]})})},A=n(42),D=n(36),V=n.n(D),M=function(e){var t=e.children,n=e.className,c=Object(A.a)(e,["children","className"]);return Object(R.jsx)("button",Object(p.a)(Object(p.a)({className:"".concat(V.a.Button," ").concat(n)},c),{},{children:t}))},z=n(37),B=n.n(z),q=function(){var e=Object(L.g)();return Object(R.jsx)(T,{title:"Are you ready?",children:Object(R.jsx)(M,{className:B.a.button,onClick:function(){return e.push("/vibration/1")},children:"Yes"})})},P=n(12),W=n(18),J=n.n(W),U=function(){var e=Object(c.useState)(""),t=Object(P.a)(e,2),n=t[0],r=t[1],a=Object(s.b)(),i=Object(L.g)();return Object(R.jsx)(T,{children:Object(R.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(k({participant:n})),i.push("/ready")},className:J.a.form,children:[Object(R.jsx)("input",{placeholder:"Participant id",type:"text",className:J.a.input,onChange:function(e){return r(e.target.value)}}),Object(R.jsx)(M,{type:"submit",disabled:!n,children:"Start"})]})})},Y=n(38),Z=n.n(Y),H=function(){return Object(R.jsxs)("div",{className:Z.a.Loader,children:[Object(R.jsx)("div",{}),Object(R.jsx)("div",{})]})},Q=n(25),X=n.n(Q),G=n(39),K=n.n(G),$=function(){var e=Object(c.useState)(5),t=Object(P.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),i=Object(P.a)(a,2),o=i[0],u=i[1],l=Object(c.useRef)(),d=Object(c.useRef)(),b=Object(L.g)(),j=Object(L.h)().index,p=Object(s.c)(function(e){return function(t){return t.sounds[e]}}(parseInt(j,10)-1)),f=p.name,h=p.url,O=Object(s.b)();return Object(c.useEffect)((function(){if(f)return l.current=new Audio(h),l.current.addEventListener("ended",(function(e){O(k({vibration:f,endAudioTime:X()()})),b.push("/vibration/".concat(j,"/feel"))})),l.current.addEventListener("error",(function(e){console.log("error")})),d.current=setTimeout((function(){1===n?(clearInterval(d.current),u(!0),l.current.play().then((function(){})).catch((function(e){console.log("error",e)}))):r(n-1)}),1e3),function(){return clearInterval(d.current)}}),[f,n]),Object(R.jsx)(T,{title:"Vibration Number ".concat(j),children:Object(R.jsx)("div",{className:K.a.countDown,children:o?Object(R.jsx)(H,{}):n})})},ee=n(14),te=n.n(ee),ne=function(){var e=Object(L.g)(),t=Object(L.h)().index,n=Object(s.b)(),c=function(c){return function(){n(k({selectionTime:X()(),direction:c})),e.push("/vibration/".concat(t,"/confidence"))}};return Object(R.jsx)(T,{title:"What did you feel?",children:Object(R.jsxs)("div",{className:te.a.buttons,children:[Object(R.jsxs)("div",{className:te.a.left,children:[Object(R.jsx)(M,{className:te.a.button,onClick:c("left"),children:Object(R.jsx)("i",{className:"fas fa-arrow-left"})}),Object(R.jsx)("div",{className:te.a.label,children:"Left"})]}),Object(R.jsxs)("div",{className:te.a.right,children:[Object(R.jsx)(M,{className:te.a.button,onClick:c("right"),children:Object(R.jsx)("i",{className:"fas fa-arrow-right"})}),Object(R.jsx)("div",{className:te.a.label,children:"Right"})]})]})})},ce=n(16),re=n.n(ce),ae=["Very confusing","Confusing","Neutral","Clear","Very clear"],ie=function(){var e=Object(L.g)(),t=Object(L.h)().index,n=Object(s.c)(y),c=Object(s.b)(),r=function(r,a){return Object(j.a)(b.a.mark((function r(){var i;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=parseInt(t,10)+1,c(k({likertScale:a+1})),r.next=4,c((function(e,t){var n=t().feedback;return x([n.vibration,n.participant,n.direction,n.likertScale,n.selectionTime,n.endAudioTime,t().repetitions[n.vibration]])}));case 4:i>n?e.push("/end"):e.push("/vibration/".concat(i));case 5:case"end":return r.stop()}}),r)})))};return Object(R.jsxs)(T,{title:"How confident you answered the question?",children:[Object(R.jsxs)("div",{className:re.a.choices,children:[Object(R.jsx)("div",{className:re.a.bar}),ae.map((function(e,t){return Object(R.jsxs)("button",{className:re.a.choice,onClick:r(0,t),children:[Object(R.jsx)("div",{className:re.a.disk}),Object(R.jsx)("div",{className:re.a.label,children:e})]},e)}))]}),Object(R.jsx)("div",{className:re.a.buttons,children:"..."})]})},se=function(){return Object(R.jsx)(T,{title:"Finished"})},oe=function(){return Object(R.jsxs)(T,{children:[Object(R.jsx)(M,{onClick:v,children:"Login"}),Object(R.jsx)(M,{onClick:m,children:"Logout"})]})},ue=function(){var e=Object(c.useState)(localStorage.getItem("folderId")),t=Object(P.a)(e,2),n=t[0],r=t[1],a=Object(s.b)(),i=Object(L.g)();return Object(R.jsx)(T,{children:Object(R.jsxs)("form",{onSubmit:function(e){e.preventDefault(),localStorage.setItem("folderId",n),a(w(n)),i.push("/setup")},className:J.a.form,children:[Object(R.jsx)("input",{placeholder:"Drive Folder id",type:"text",defaultValue:n,className:J.a.input,onChange:function(e){return r(e.target.value)}}),Object(R.jsx)(M,{type:"submit",disabled:!n,children:"Select folder"})]})})},le=n(33),de=function(e){for(var t,n,c=e.length;0!==c;)n=Math.floor(Math.random()*c),t=e[c-=1],e[c]=e[n],e[n]=t;return e},be=n(26),je=n.n(be),pe=function(){var e=Object(c.useState)(localStorage.getItem("repetitions")||4),t=Object(P.a)(e,2),n=t[0],r=t[1],a=Object(s.c)(I),i=Object(c.useState)([]),o=Object(P.a)(i,2),u=o[0],l=o[1],d=Object(s.b)(),b=Object(L.g)();Object(c.useEffect)((function(){O(a).then((function(e){l(e)}))}),[a]);return Object(R.jsx)(T,{children:Object(R.jsxs)("form",{onSubmit:function(e){e.preventDefault(),localStorage.setItem("repetitions",n);var t=u.map((function(e){return{id:e.id,name:e.name,url:e.webContentLink}})).reduce((function(e,t){return[].concat(Object(le.a)(e),Object(le.a)((c=t,new Array(n).fill(0).map((function(e){return c})))));var c}),[]);d(N(de(t))),b.push("/start")},className:je.a.form,children:[Object(R.jsxs)("span",{className:je.a.detected,children:[u.length," sounds detected"]}),Object(R.jsx)("input",{placeholder:"Repetitions",type:"number",defaultValue:n,className:je.a.input,onChange:function(e){return r(e.target.value)}}),Object(R.jsx)(M,{type:"submit",children:"Select repetitions"})]})})},fe=n(40),he=n.n(fe),Oe=function(){var e=Object(L.g)();return Object(R.jsx)(T,{children:Object(R.jsxs)("div",{className:he.a.buttons,children:[Object(R.jsx)(M,{onClick:function(){return e.push("/select-folder")},children:"Experiment"}),Object(R.jsx)(M,{onClick:function(){return x()},children:"Test"}),Object(R.jsx)(M,{onClick:function(){m(),e.push("/")},children:"Logout"})]})})},xe=function(){var e=Object(s.b)(),t=Object(L.g)();return Object(c.useEffect)((function(){var n;e((n=function(){t.push("/menu")},function(e){return gapi.load("client:auth2",Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gapi.client.init({apiKey:"AIzaSyChogZ8gZRJwkeUBcrA6kwnAOAFTk7jZ7I",discoveryDocs:h,clientId:"1010153724789-cp1efnufhm21qkvn64hqoe402jfivs13.apps.googleusercontent.com",scope:" https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/spreadsheets "});case 3:console.log("authenticated",gapi.auth2.getAuthInstance().isSignedIn.get()),gapi.auth2.getAuthInstance().isSignedIn.listen(n),gapi.auth2.getAuthInstance().isSignedIn.get()&&n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))))}))}),[]),Object(R.jsx)("div",{className:"App",children:Object(R.jsxs)(L.d,{children:[Object(R.jsx)(L.b,{path:"/ready",children:Object(R.jsx)(q,{})}),Object(R.jsx)(L.b,{path:"/vibration/:index/feel",exact:!0,children:Object(R.jsx)(ne,{})}),Object(R.jsx)(L.b,{path:"/vibration/:index/confidence",exact:!0,children:Object(R.jsx)(ie,{})}),Object(R.jsx)(L.b,{path:"/vibration/:index",exact:!0,children:Object(R.jsx)($,{})}),Object(R.jsx)(L.b,{path:"/end",exact:!0,children:Object(R.jsx)(se,{})}),Object(R.jsx)(L.b,{path:"/start",children:Object(R.jsx)(U,{})}),Object(R.jsx)(L.b,{path:"/select-folder",children:Object(R.jsx)(ue,{})}),Object(R.jsx)(L.b,{path:"/setup",children:Object(R.jsx)(pe,{})}),Object(R.jsx)(L.b,{path:"/menu",children:Object(R.jsx)(Oe,{})}),Object(R.jsx)(L.b,{path:"/login",children:Object(R.jsx)(oe,{})}),Object(R.jsx)(L.a,{to:"/login"})]})})},ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(s.a,{store:C,children:Object(R.jsx)(o.a,{basename:"/ParticipantWebsite",children:Object(R.jsx)(xe,{})})})}),document.getElementById("root")),ve()}},[[56,1,2]]]);
//# sourceMappingURL=main.27248edd.chunk.js.map