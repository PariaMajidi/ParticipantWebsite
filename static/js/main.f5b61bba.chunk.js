(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){e.exports={buttons:"VibrationFeedback_buttons__3fVqe",label:"VibrationFeedback_label__2wY3y",button:"VibrationFeedback_button__3c8Px"}},function(e,t,n){e.exports={choices:"Confidence_choices__bNdTw",bar:"Confidence_bar__hCQLU",choice:"Confidence_choice__3WEj0",disk:"Confidence_disk__1Mzzn",label:"Confidence_label__3d-zk"}},,function(e,t,n){e.exports={form:"Start_form__1-51v",input:"Start_input__2mfo9"}},,,,,,,function(e,t){e.exports=function(){var e=new Date;return"".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds(),".").concat(e.getMilliseconds())}},function(e,t,n){e.exports={form:"Setup_form__33R4h",input:"Setup_input__3x1Nx",detected:"Setup_detected__p3N_r"}},function(e,t,n){e.exports={loading:"FileList_loading__NkxFS",sound:"FileList_sound__36RHA",name:"FileList_name__A_cHk"}},,,,function(e,t,n){e.exports={Layout:"Layout_Layout__cNxex",title:"Layout_title__1Vzaw"}},function(e,t,n){e.exports={Button:"Button_Button__30-l0"}},,,function(e,t,n){e.exports={countDown:"Vibration_countDown__2Jysa"}},,,,,function(e,t,n){e.exports={button:"Ready_button__1_RgV"}},function(e,t,n){e.exports={Loader:"Loader_Loader__Ql2Gi","-webkit-lds-ripple":"Loader_-webkit-lds-ripple__1RFsK","lds-ripple":"Loader_lds-ripple__3zHcd"}},function(e,t,n){e.exports={ButtonList:"ButtonList_ButtonList__2lwQ-"}},,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,function(e,t,n){e.exports={buttons:"Menu_buttons__bp7eO"}},function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(22),i=n.n(r),s=n(4),o=n(8),u=n(5),l=n(20),d=n(12),b=n(43),j=n(6),p=n.n(j),f=n(14),h=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest","https://sheets.googleapis.com/$discovery/rest?version=v4"],O=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gapi.client.drive.files.list({q:"mimeType='audio/wav' and '".concat(t,"' in parents"),spaces:"drive",fields:"files(id, webContentLink, webViewLink, name)",pageSize:1e3});case 3:return c=e.sent,console.log("result",c),e.abrupt("return",(null===c||void 0===c||null===(n=c.result)||void 0===n?void 0:n.files)||[]);case 8:e.prev=8,e.t0=e.catch(0),console.error("error",e.t0);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,c,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gapi.client.drive.files.list({q:"name='Database' and '".concat(t,"' in parents"),spaces:"drive",fields:"files(id)",pageSize:1e3});case 3:return r=e.sent,console.log("database",null===r||void 0===r||null===(n=r.result)||void 0===n?void 0:n.files),e.abrupt("return",null===r||void 0===r||null===(c=r.result)||void 0===c||null===(a=c.files[0])||void 0===a?void 0:a.id);case 8:e.prev=8,e.t0=e.catch(0),console.error("error",e.t0);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=[t],gapi.client.sheets.spreadsheets.values.append({spreadsheetId:n,resource:{values:c,majorDimension:"ROWS"},range:"Sheet1",insertDataOption:"INSERT_ROWS",valueInputOption:"USER_ENTERED"}).then((function(e){var t=e.result;console.log("".concat(t.updates.updatedCells," cells appended.")),console.log(t.tableRange)})).catch((function(e){console.log("error",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){return gapi.auth2.getAuthInstance().signIn()},g=Object(b.a)({name:"sounds",initialState:{sounds:[],feedback:{},repetitions:{},folderId:"",database:""},reducers:{setSounds:function(e,t){var n=t.payload;e.sounds=n},setFolderId:function(e,t){var n=t.payload;e.folderId=n},setDatabase:function(e,t){var n=t.payload;e.database=n},setCurrentFeedback:function(e,t){var n=t.payload;n.vibration&&(e.repetitions[n.vibration]=(e.repetitions[n.vibration]||0)+1),e.feedback=Object(d.a)(Object(d.a)(Object(d.a)({},e.feedback),n),{},{repetition:e.repetitions[n.vibration]})}}}),_=g.actions,w=_.setSounds,N=_.setCurrentFeedback,k=_.setFolderId,S=_.setDatabase,y=g.reducer,I=function(e){return e.sounds.length},L=function(e){return e.folderId},C=function(e){var t=[l.a],n=[u.a.apply(void 0,t)],c=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d).apply(void 0,n);return Object(u.e)(y,e,c)}(),E=(n(53),n(3)),D=(n(54),n(31)),F=n.n(D),A=n(0),R=function(e){var t=e.title,n=e.children;return Object(A.jsx)("div",{className:F.a.Layout,children:Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{className:F.a.title,children:t}),n]})})},T=n(37),V=n(32),B=n.n(V),M=function(e){var t=e.children,n=e.className,c=Object(T.a)(e,["children","className"]);return Object(A.jsx)("button",Object(d.a)(Object(d.a)({className:"".concat(B.a.Button," ").concat(n)},c),{},{children:t}))};M.Link=function(e){var t=e.children,n=e.className,c=Object(T.a)(e,["children","className"]);return Object(A.jsx)(o.b,Object(d.a)(Object(d.a)({className:"".concat(B.a.Button," ").concat(n)},c),{},{children:t}))};var z=M,P=n(40),U=n.n(P),q=function(){var e=Object(E.g)();return Object(A.jsx)(R,{title:"Are you ready?",children:Object(A.jsx)(z,{className:U.a.button,onClick:function(){return e.push("/vibration/1")},children:"Yes"})})},H=n(9),J=n(18),W=n.n(J),Q=function(){var e=Object(c.useState)(""),t=Object(H.a)(e,2),n=t[0],a=t[1],r=Object(s.b)(),i=Object(E.g)();return Object(A.jsx)(R,{children:Object(A.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r(N({participant:n})),i.push("/ready")},className:W.a.form,children:[Object(A.jsx)("input",{placeholder:"Participant id",type:"text",className:W.a.input,onChange:function(e){return a(e.target.value)}}),Object(A.jsx)(z,{type:"submit",disabled:!n,children:"Start"})]})})},Y=n(41),Z=n.n(Y),K=function(){return Object(A.jsxs)("div",{className:Z.a.Loader,children:[Object(A.jsx)("div",{}),Object(A.jsx)("div",{})]})},X=n(25),G=n.n(X),$=n(35),ee=n.n($),te=function(){var e=Object(c.useState)(3),t=Object(H.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),i=Object(H.a)(r,2),o=i[0],u=i[1],l=Object(c.useRef)(),d=Object(c.useRef)(),b=Object(E.g)(),j=Object(E.h)().index,p=Object(s.c)(function(e){return function(t){return t.sounds[e]}}(parseInt(j,10)-1)),f=Object(s.b)();return Object(c.useEffect)((function(){if(null===p||void 0===p?void 0:p.name)return l.current=new Audio(null===p||void 0===p?void 0:p.url),l.current.addEventListener("ended",(function(e){f(N({vibration:null===p||void 0===p?void 0:p.name,endAudioTime:G()(),index:j})),b.push("/vibration/".concat(j,"/feel"))})),l.current.addEventListener("error",(function(e){console.log("error")})),d.current=setTimeout((function(){1===n?(clearInterval(d.current),u(!0),l.current.play().then((function(){})).catch((function(e){console.log("error",e)}))):a(n-1)}),1e3),function(){return clearInterval(d.current)}}),[null===p||void 0===p?void 0:p.name,n]),p?Object(A.jsx)(R,{title:"Vibration Number ".concat(j),children:Object(A.jsx)("div",{className:ee.a.countDown,children:o?Object(A.jsx)(K,{}):n})}):Object(A.jsx)(R,{title:"Vibration Number ".concat(j),children:Object(A.jsx)("div",{className:ee.a.countDown,children:"Oups sound doesn't exist"})})},ne=n(15),ce=n.n(ne),ae=function(){var e=Object(E.g)(),t=Object(E.h)().index,n=Object(s.b)(),c=Object(s.c)(I),a=function(a){return Object(f.a)(p.a.mark((function r(){var i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(N({selectionTime:G()(),direction:a})),r.next=3,n((function(e,t){var n=t(),c=n.feedback,a=n.database;return v([c.vibration,c.index,c.participant,c.direction,"",c.selectionTime,c.endAudioTime,t().repetitions[c.vibration]],a)}));case 3:(i=parseInt(t,10)+1)>c?(e.push("/confidence"),e.push("/confidence")):e.push("/vibration/".concat(i));case 5:case"end":return r.stop()}}),r)})))};return Object(A.jsx)(R,{title:"What direction did you feel?",children:Object(A.jsxs)("div",{className:ce.a.buttons,children:[Object(A.jsxs)("div",{className:ce.a.left,children:[Object(A.jsx)(z,{className:ce.a.button,onClick:a("left"),children:Object(A.jsx)("i",{className:"fas fa-arrow-left"})}),Object(A.jsx)("div",{className:ce.a.label,children:"Left"})]}),Object(A.jsxs)("div",{className:ce.a.right,children:[Object(A.jsx)(z,{className:ce.a.button,onClick:a("right"),children:Object(A.jsx)("i",{className:"fas fa-arrow-right"})}),Object(A.jsx)("div",{className:ce.a.label,children:"Right"})]})]})})},re=n(16),ie=n.n(re),se=["Very confusing","Confusing","Neutral","Clear","Very clear"],oe=function(){var e=Object(s.b)(),t=Object(E.g)();return Object(A.jsxs)(R,{title:"How clearly did the vibrations show the direction?",children:[Object(A.jsxs)("div",{className:ie.a.choices,children:[Object(A.jsx)("div",{className:ie.a.bar}),se.map((function(n,c){return Object(A.jsxs)("button",{className:ie.a.choice,onClick:(a=c,Object(f.a)(p.a.mark((function n(){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(N({likertScale:a+1})),n.next=3,e((function(e,t){var n=t(),c=n.feedback,a=n.database;return v(["","",c.participant,"",c.likertScale,"","",""],a)}));case 3:t.push("/end");case 4:case"end":return n.stop()}}),n)})))),children:[Object(A.jsx)("div",{className:ie.a.disk}),Object(A.jsx)("div",{className:ie.a.label,children:n})]},n);var a}))]}),Object(A.jsx)("div",{className:ie.a.buttons,children:"..."})]})},ue=n(42),le=n.n(ue),de=function(e){var t=e.children;return Object(A.jsx)("div",{className:le.a.ButtonList,children:t})},be=function(){return Object(A.jsx)(R,{title:"Please raise your hand to the window and wait until the moderator come to the room. Thanks for your participation",children:Object(A.jsxs)(de,{children:[Object(A.jsx)(z.Link,{to:"/menu",children:"Menu"}),Object(A.jsx)(z.Link,{to:"/start",children:"New Participant"})]})})},je=function(){return Object(A.jsx)(R,{children:Object(A.jsx)(z,{onClick:m,children:"Login"})})},pe=function(){var e=Object(c.useState)(localStorage.getItem("folderId")),t=Object(H.a)(e,2),n=t[0],a=t[1],r=Object(s.b)(),i=Object(E.g)();return Object(A.jsx)(R,{children:Object(A.jsxs)("form",{onSubmit:function(e){e.preventDefault(),localStorage.setItem("folderId",n),r(k(n)),i.push("/submenu")},className:W.a.form,children:[Object(A.jsx)("input",{placeholder:"Drive Folder id",type:"text",defaultValue:n,className:W.a.input,onChange:function(e){return a(e.target.value)}}),Object(A.jsx)(z,{type:"submit",disabled:!n,children:"Select folder"})]})})},fe=n(36),he=function(e){for(var t,n,c=e.length;0!==c;)n=Math.floor(Math.random()*c),t=e[c-=1],e[c]=e[n],e[n]=t;return e},Oe=n(26),xe=n.n(Oe),ve=function(){var e=Object(c.useState)(parseInt(localStorage.getItem("repetitions"))||4),t=Object(H.a)(e,2),n=t[0],a=t[1],r=Object(s.c)(L),i=Object(c.useState)([]),o=Object(H.a)(i,2),u=o[0],l=o[1],d=Object(s.b)(),b=Object(E.g)();Object(c.useEffect)((function(){O(r).then((function(e){l(e)})),x(r).then((function(e){console.log("setDatabase",e),d(S(e))}))}),[r]);return Object(A.jsx)(R,{children:Object(A.jsxs)("form",{onSubmit:function(e){e.preventDefault(),localStorage.setItem("repetitions",n);var t=u.map((function(e){return{id:e.id,name:e.name,url:e.webContentLink}})).reduce((function(e,t){return[].concat(Object(fe.a)(e),Object(fe.a)(new Array(n).fill(0).map((function(e){return t}))))}),[]);d(w(he(t))),b.push("/start")},className:xe.a.form,children:[Object(A.jsxs)("span",{className:xe.a.detected,children:[u.length," sounds detected"]}),Object(A.jsx)("input",{placeholder:"Repetitions",type:"number",defaultValue:n,className:xe.a.input,onChange:function(e){return a(parseInt(e.target.value))}}),Object(A.jsx)(z,{type:"submit",children:"Select repetitions"})]})})},me=(n(57),function(){var e=Object(E.g)();return Object(A.jsx)(R,{children:Object(A.jsxs)(de,{children:[Object(A.jsx)(z.Link,{to:"/select-folder",children:"Start"}),Object(A.jsx)(z,{onClick:function(){gapi.auth2.getAuthInstance().signOut(),e.push("/")},children:"Logout"})]})})}),ge=function(){return Object(A.jsx)(R,{children:Object(A.jsxs)(de,{children:[Object(A.jsx)(z.Link,{to:"/setup",children:"Experiment"}),Object(A.jsx)(z.Link,{to:"/file-list",children:"List"})]})})},_e=n(27),we=n.n(_e),Ne=function(e,t){return e.name<t.name?-1:e.name>t.name?1:0},ke=function(){var e=Object(c.useState)([]),t=Object(H.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!0),i=Object(H.a)(r,2),o=i[0],u=i[1],l=Object(s.c)(L)||localStorage.getItem("folderId");return Object(c.useEffect)((function(){O(l).then((function(e){var t=[];u(!1),e.forEach((function(e){var n;(n=e.id,gapi.client.drive.files.get({fileId:n,alt:"media"}).then((function(e){return btoa(e.body)}))).then((function(n){t.push(Object(d.a)(Object(d.a)({},e),{},{dataUrl:"data:audio/wav;base64,".concat(n)})),a([].concat(t))}))}))}))}),[]),Object(A.jsxs)(R,{title:"Sounds",children:[o?Object(A.jsx)("span",{className:we.a.loading,children:"loading"}):null,n.sort(Ne).map((function(e){return Object(A.jsxs)("div",{className:we.a.sound,children:[Object(A.jsx)("div",{className:we.a.name,children:e.name}),Object(A.jsxs)("audio",{controls:!0,src:e.dataUrl,type:"audio/wav",children:["Your browser does not support the",Object(A.jsx)("code",{children:"audio"})," element."]})]},e.id)}))]})},Se=function(){var e=Object(s.b)(),t=Object(E.g)();return Object(c.useEffect)((function(){var n;e((n=function(){t.push("/menu")},function(e){return gapi.load("client:auth2",Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gapi.client.init({apiKey:"AIzaSyChogZ8gZRJwkeUBcrA6kwnAOAFTk7jZ7I",discoveryDocs:h,clientId:"1010153724789-cp1efnufhm21qkvn64hqoe402jfivs13.apps.googleusercontent.com",scope:" https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/spreadsheets "});case 3:console.log("authenticated",gapi.auth2.getAuthInstance().isSignedIn.get()),gapi.auth2.getAuthInstance().isSignedIn.listen(n),gapi.auth2.getAuthInstance().isSignedIn.get()&&n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))))}))}),[]),Object(A.jsx)("div",{className:"App",children:Object(A.jsxs)(E.d,{children:[Object(A.jsx)(E.b,{path:"/ready",children:Object(A.jsx)(q,{})}),Object(A.jsx)(E.b,{path:"/vibration/:index/feel",exact:!0,children:Object(A.jsx)(ae,{})}),Object(A.jsx)(E.b,{path:"/confidence",exact:!0,children:Object(A.jsx)(oe,{})}),Object(A.jsx)(E.b,{path:"/vibration/:index",exact:!0,children:Object(A.jsx)(te,{})}),Object(A.jsx)(E.b,{path:"/end",exact:!0,children:Object(A.jsx)(be,{})}),Object(A.jsx)(E.b,{path:"/start",children:Object(A.jsx)(Q,{})}),Object(A.jsx)(E.b,{path:"/select-folder",children:Object(A.jsx)(pe,{})}),Object(A.jsx)(E.b,{path:"/submenu",children:Object(A.jsx)(ge,{})}),Object(A.jsx)(E.b,{path:"/file-list",children:Object(A.jsx)(ke,{})}),Object(A.jsx)(E.b,{path:"/setup",children:Object(A.jsx)(ve,{})}),Object(A.jsx)(E.b,{path:"/menu",children:Object(A.jsx)(me,{})}),Object(A.jsx)(E.b,{path:"/login",children:Object(A.jsx)(je,{})}),Object(A.jsx)(E.a,{to:"/login"})]})})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(A.jsx)(a.a.StrictMode,{children:Object(A.jsx)(s.a,{store:C,children:Object(A.jsx)(o.a,{children:Object(A.jsx)(Se,{})})})}),document.getElementById("root")),ye()}],[[58,1,2]]]);
//# sourceMappingURL=main.f5b61bba.chunk.js.map